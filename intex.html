<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brain Battle - Global Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Inter', sans-serif; }
      .glass {
          background: rgba(255, 255, 255, 0.03);
          backdrop-filter: blur(16px);
          -webkit-backdrop-filter: blur(16px);
          border: 1px solid rgba(255, 255, 255, 0.08);
      }
      .glass-btn:hover {
          background: rgba(255, 255, 255, 0.08);
          border-color: rgba(255, 255, 255, 0.2);
      }
      .glass-highlight {
          background: linear-gradient(180deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.0) 100%);
          border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .hide-scroll::-webkit-scrollbar { display: none; }
      .hide-scroll { -ms-overflow-style: none; scrollbar-width: none; }

      /* Animations */
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      .animate-fade-in { animation: fadeIn 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

      @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
      .animate-float { animation: float 6s ease-in-out infinite; }

      .correct-anim { background-color: rgba(16, 185, 129, 0.15) !important; border-color: rgba(16, 185, 129, 0.5) !important; }
      .wrong-anim { background-color: rgba(244, 63, 94, 0.15) !important; border-color: rgba(244, 63, 94, 0.5) !important; }

      .timer-warning { color: #f43f5e; animation: pulse 1s infinite; }
      @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5819347025132487"
     crossorigin="anonymous"></script>
  </head>
  <body class="bg-black text-slate-300 min-h-screen flex items-center justify-center p-4 sm:p-8 antialiased selection:bg-indigo-500/30">
    <!-- Main App Container -->
    <div class="relative w-full max-w-[400px] h-[850px] bg-zinc-950 rounded-[32px] overflow-hidden shadow-2xl border border-zinc-800 flex flex-col">
      <!-- Background Ambient -->
      <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
        <div class="absolute top-[-10%] left-[-10%] w-[300px] h-[300px] bg-indigo-600/10 rounded-full blur-[100px]"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[300px] h-[300px] bg-emerald-600/5 rounded-full blur-[100px]"></div>
      </div>

      <!-- Header (Dynamic) -->
      <header id="main-header" class="relative z-10 px-6 pt-8 pb-4 flex justify-between items-center hidden">
        <div class="flex flex-col">
          <h1 class="text-white text-lg font-medium tracking-tight flex items-center gap-2">
            <iconify-icon icon="lucide:brain-circuit" width="18" class="text-indigo-400"></iconify-icon>
            BRAIN BATTLE
          </h1>
          <span id="header-context" class="text-xs text-zinc-500 tracking-wide font-medium mt-0.5">
            ...
          </span>
        </div>

        <!-- Timer Display -->
        <div id="timer-badge" class="flex items-center gap-2 bg-zinc-900/80 border border-zinc-800 px-3 py-1.5 rounded-full transition-colors duration-300">
          <iconify-icon icon="lucide:timer" class="text-zinc-400" width="14"></iconify-icon>
          <span id="timer-display" class="text-xs font-semibold text-white tabular-nums tracking-wide">
            60s
          </span>
        </div>
      </header>

      <!-- VIEW 0: WELCOME PAGE -->
      <main id="view-welcome" class="relative z-20 flex-1 flex flex-col justify-center items-center px-6 animate-fade-in text-center">
        <div class="relative mb-12 animate-float">
          <div class="absolute inset-0 bg-indigo-500 blur-3xl opacity-20 rounded-full"></div>
          <div class="relative w-24 h-24 bg-gradient-to-tr from-zinc-900 to-zinc-800 rounded-3xl border border-white/10 flex items-center justify-center shadow-2xl">
            <iconify-icon icon="lucide:brain-circuit" width="48" class="text-indigo-400"></iconify-icon>
          </div>
          <!-- Decor elements -->
          <div class="absolute -top-4 -right-4 w-10 h-10 bg-zinc-900 rounded-xl border border-zinc-800 flex items-center justify-center shadow-lg">
            <iconify-icon icon="lucide:sparkles" width="20" class="text-amber-400"></iconify-icon>
          </div>
          <div class="absolute -bottom-2 -left-4 w-12 h-12 bg-zinc-900 rounded-xl border border-zinc-800 flex items-center justify-center shadow-lg">
            <span class="text-lg">üìö</span>
          </div>
        </div>

        <h1 class="text-3xl font-semibold text-white tracking-tight mb-3">
          Brain Battle
        </h1>
        <p class="text-sm text-zinc-400 leading-relaxed max-w-[260px] mb-10">
          Master your subjects with quick quizzes. Challenge yourself and learn
          everyday.
        </p>

        <button onclick="startApp()" class="w-full bg-white text-black font-medium py-4 rounded-xl shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:bg-zinc-200 transition-all active:scale-95 flex items-center justify-center gap-2 group">
          <span>Start Learning</span>
          <iconify-icon icon="lucide:arrow-right" width="18" class="group-hover:translate-x-1 transition-transform"></iconify-icon>
        </button>

        <div class="mt-8 flex items-center gap-4 text-xs text-zinc-600">
          <div class="flex items-center gap-1.5">
            <iconify-icon icon="lucide:check" width="12"></iconify-icon>
            Free
          </div>
          <div class="w-1 h-1 bg-zinc-800 rounded-full"></div>
          <div class="flex items-center gap-1.5">
            <iconify-icon icon="lucide:check" width="12"></iconify-icon>
            Fun
          </div>
          <div class="w-1 h-1 bg-zinc-800 rounded-full"></div>
          <div class="flex items-center gap-1.5">
            <iconify-icon icon="lucide:check" width="12"></iconify-icon>
            Fast
          </div>
        </div>
      </main>

      <!-- VIEW 1: SELECT LANGUAGE -->
      <main id="view-language" class="hidden relative z-20 flex-1 flex flex-col px-6 animate-fade-in overflow-hidden">
        <div class="mt-8 mb-6 text-center flex-shrink-0 relative">
          <button onclick="goBack('welcome')" class="absolute top-0 left-0 text-zinc-500 hover:text-white transition-colors p-2 -ml-2">
            <iconify-icon icon="lucide:arrow-left" width="20"></iconify-icon>
          </button>
          <div class="w-12 h-12 bg-indigo-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4 border border-indigo-500/20">
            <iconify-icon icon="lucide:languages" width="24" class="text-indigo-400"></iconify-icon>
          </div>
          <h2 class="text-xl font-semibold text-white tracking-tight mb-2">
            Select Language
          </h2>
          <p class="text-xs text-zinc-500">
            Choose your preferred language to start.
          </p>
        </div>

        <div class="flex-1 overflow-y-auto hide-scroll pb-6 -mx-2 px-2">
          <div class="flex flex-col gap-3">
            <button onclick="setLanguage('en')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üá∫üá∏</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">English</div>
                  <div class="text-[10px] text-zinc-500">Default</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('hi')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡§π‡§ø‡§Ç‡§¶‡•Ä</div>
                  <div class="text-[10px] text-zinc-500">Hindi</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('hinglish')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üí¨</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">Hinglish</div>
                  <div class="text-[10px] text-zinc-500">
                    Mix of Hindi &amp; English
                  </div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('mr')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡§Æ‡§∞‡§æ‡§†‡•Ä</div>
                  <div class="text-[10px] text-zinc-500">Marathi</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('bn')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</div>
                  <div class="text-[10px] text-zinc-500">Bengali</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('ta')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</div>
                  <div class="text-[10px] text-zinc-500">Tamil</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('te')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</div>
                  <div class="text-[10px] text-zinc-500">Telugu</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('gu')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</div>
                  <div class="text-[10px] text-zinc-500">Gujarati</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('kn')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡≤ï‡≤®‡≥ç‡≤®‡≤°</div>
                  <div class="text-[10px] text-zinc-500">Kannada</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('ml')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</div>
                  <div class="text-[10px] text-zinc-500">Malayalam</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('pa')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</div>
                  <div class="text-[10px] text-zinc-500">Punjabi</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('or')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</div>
                  <div class="text-[10px] text-zinc-500">Odia</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('as')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ</div>
                  <div class="text-[10px] text-zinc-500">Assamese</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>

            <button onclick="setLanguage('ur')" class="glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all shrink-0">
              <div class="flex items-center gap-3">
                <span class="text-lg">üáÆüá≥</span>
                <div class="text-left">
                  <div class="text-sm font-medium text-white">ÿßÿ±ÿØŸà</div>
                  <div class="text-[10px] text-zinc-500">Urdu</div>
                </div>
              </div>
              <iconify-icon icon="lucide:chevron-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
            </button>
          </div>
        </div>
      </main>

      <!-- VIEW 2: SELECT CLASS -->
      <main id="view-class" class="hidden relative z-20 flex-1 flex flex-col pt-12 px-6 animate-fade-in">
        <button onclick="goBack('language')" class="absolute top-8 left-6 text-zinc-500 hover:text-white transition-colors">
          <iconify-icon icon="lucide:arrow-left" width="20"></iconify-icon>
        </button>

        <div class="mb-6 mt-4">
          <h2 id="lbl-select-class" class="text-lg font-medium text-white tracking-tight mb-1">
            Select Class
          </h2>
          <p id="lbl-select-class-sub" class="text-xs text-zinc-500">
            Choose your grade level.
          </p>
        </div>

        <div class="grid grid-cols-3 gap-3 overflow-y-auto hide-scroll pb-4">
          <!-- Generated by JS -->
          <script>
            for(let i=1; i<=12; i++) {
                document.write(`
                    <button onclick="setClass(${i})" class="glass glass-btn aspect-square rounded-xl flex flex-col items-center justify-center gap-1 hover:border-indigo-500/50 transition-all">
                        <span class="text-xl font-semibold text-white">${i}</span>
                        <span class="text-[10px] text-zinc-500 uppercase tracking-wider">Class</span>
                    </button>
                `);
            }
          </script>
        </div>
      </main>

      <!-- VIEW 3: SELECT SUBJECT -->
      <main id="view-subject" class="hidden relative z-20 flex-1 flex flex-col pt-12 px-6 animate-fade-in">
        <button onclick="goBack('class')" class="absolute top-8 left-6 text-zinc-500 hover:text-white transition-colors">
          <iconify-icon icon="lucide:arrow-left" width="20"></iconify-icon>
        </button>

        <div class="mb-6 mt-4">
          <h2 id="lbl-select-subject" class="text-lg font-medium text-white tracking-tight mb-1">
            Select Subject
          </h2>
          <p id="lbl-select-subject-sub" class="text-xs text-zinc-500">
            What do you want to learn today?
          </p>
        </div>

        <div id="subject-grid" class="flex flex-col gap-3">
          <!-- Injected via JS -->
        </div>
      </main>

      <!-- VIEW 4: BATTLE GAME -->
      <main id="view-battle" class="hidden relative z-10 flex-1 px-6 flex flex-col animate-fade-in pt-4">
        <!-- Progress Info -->
        <div class="flex justify-between items-end mb-2">
          <span class="text-xs font-medium text-zinc-400 tracking-wide">
            <span id="lbl-score">SCORE</span>
            <span id="score-display" class="text-white text-lg ml-1">0</span>
          </span>
          <button onclick="endGame()" class="text-[10px] bg-zinc-900 border border-zinc-800 text-zinc-400 px-2 py-1 rounded hover:text-white transition-colors">
            <iconify-icon icon="lucide:log-out" class="inline mb-0.5" width="10"></iconify-icon>
            EXIT
          </button>
        </div>

        <div class="w-full h-1 bg-zinc-800 rounded-full mb-8 overflow-hidden">
          <div id="progress-bar" class="h-full w-[0%] bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-500"></div>
        </div>

        <!-- Question Card -->
        <div class="relative glass-highlight p-6 rounded-2xl mb-6 shadow-xl min-h-[140px] flex items-center justify-center border-t border-white/10">
          <h2 id="question-text" class="text-lg font-medium text-white leading-relaxed text-center tracking-tight">
            Loading...
          </h2>
          <!-- Timeout Badge -->
          <div id="timeout-badge" class="hidden absolute top-0 right-0 -mt-3 -mr-2 bg-rose-500 text-white text-[10px] px-2 py-0.5 rounded-full font-bold shadow-lg">
            TIME UP
          </div>
        </div>

        <!-- Options Grid -->
        <div id="options-container" class="flex flex-col gap-3 mb-auto">
          <!-- Options injected via JS -->
        </div>

        <!-- Next Button Area -->
        <div class="mt-4 flex flex-col gap-4 h-[60px]">
          <button id="next-btn" onclick="nextQuestion()" class="hidden w-full bg-white text-black font-medium py-3.5 rounded-xl shadow-[0_0_20px_rgba(255,255,255,0.15)] hover:bg-zinc-200 transition-colors active:scale-95 flex items-center justify-center gap-2">
            <span id="lbl-next">Next Question</span>
            <iconify-icon icon="lucide:arrow-right" width="16"></iconify-icon>
          </button>
        </div>
      </main>

      <!-- Bottom Navigation (Only visible during game) -->
      <nav id="game-nav" class="hidden relative z-10 border-t border-white/5 bg-zinc-950/80 backdrop-blur-xl px-6 py-4 mt-4">
        <div class="flex justify-between items-center">
          <div class="flex flex-col gap-0.5">
            <div class="text-[10px] text-zinc-500 uppercase tracking-wider" id="nav-class-info">
              Class
            </div>
            <div class="text-xs text-white font-medium" id="nav-subject-info">
              Subject
            </div>
          </div>

          <div class="h-8 w-px bg-zinc-800 mx-4"></div>

          <div class="flex-1 text-right">
            <div class="text-[10px] text-zinc-500 uppercase tracking-wider">
              Streak
            </div>
            <div class="text-xs text-orange-400 font-medium flex items-center justify-end gap-1">
              <iconify-icon icon="lucide:flame" width="12"></iconify-icon>
              <span id="streak-display">0</span>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <!-- Application Logic -->
    <script>
      // --- TRANSLATION STORE ---
      const translations = {
          en: {
              selectClass: "Select Class",
              selectClassSub: "Choose your grade level.",
              selectSubject: "Select Subject",
              selectSubjectSub: "What do you want to learn today?",
              score: "SCORE",
              next: "Next Question",
              timeUp: "Time's Up!",
              subjects: {
                  Math: "Mathematics", Science: "Science", English: "English",
                  History: "History", EVS: "EVS", Physics: "Physics",
                  Chemistry: "Chemistry", Biology: "Biology", GK: "General Knowledge"
              }
          },
          hi: {
              selectClass: "‡§ï‡§ï‡•ç‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
              selectClassSub: "‡§Ö‡§™‡§®‡§æ ‡§ó‡•ç‡§∞‡•á‡§° ‡§∏‡•ç‡§§‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§",
              selectSubject: "‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç",
              selectSubjectSub: "‡§Ü‡§ú ‡§Ü‡§™ ‡§ï‡•ç‡§Ø‡§æ ‡§∏‡•Ä‡§ñ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?",
              score: "‡§∏‡•ç‡§ï‡•ã‡§∞",
              next: "‡§Ö‡§ó‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®",
              timeUp: "‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!",
              subjects: {
                  Math: "‡§ó‡§£‡§ø‡§§", Science: "‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®", English: "‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡§º‡•Ä",
                  History: "‡§á‡§§‡§ø‡§π‡§æ‡§∏", EVS: "‡§™‡§∞‡•ç‡§Ø‡§æ‡§µ‡§∞‡§£ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§®", Physics: "‡§≠‡•å‡§§‡§ø‡§ï ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®",
                  Chemistry: "‡§∞‡§∏‡§æ‡§Ø‡§® ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®", Biology: "‡§ú‡•Ä‡§µ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®", GK: "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ú‡•ç‡§û‡§æ‡§®"
              }
          },
          hinglish: {
              selectClass: "Class Select Karein",
              selectClassSub: "Apna class choose karo.",
              selectSubject: "Subject Select Karein",
              selectSubjectSub: "Aaj kya padhna hai?",
              score: "SCORE",
              next: "Next Question",
              timeUp: "Time Khatam!",
              subjects: {
                  Math: "Maths", Science: "Science", English: "English",
                  History: "History", EVS: "EVS", Physics: "Physics",
                  Chemistry: "Chemistry", Biology: "Biology", GK: "General Knowledge"
              }
          }
      };

      // --- STATE MANAGEMENT ---
      let state = {
          lang: 'en',
          class: null,
          subject: null,
          score: 0,
          streak: 0,
          currentQIndex: 0,
          isAnswered: false,
          timer: null,
          timeLeft: 60
      };

      // --- NAVIGATION LOGIC ---
      function startApp() {
          document.getElementById('view-welcome').classList.add('hidden');
          document.getElementById('view-language').classList.remove('hidden');
      }

      function setLanguage(lang) {
          state.lang = lang;
          document.getElementById('view-language').classList.add('hidden');
          document.getElementById('view-class').classList.remove('hidden');

          const t = translations[lang] || translations['en'];
          document.getElementById('lbl-select-class').innerText = t.selectClass;
          document.getElementById('lbl-select-class-sub').innerText = t.selectClassSub;
          document.getElementById('lbl-select-subject').innerText = t.selectSubject;
          document.getElementById('lbl-select-subject-sub').innerText = t.selectSubjectSub;
          document.getElementById('lbl-score').innerText = t.score;
          document.getElementById('lbl-next').innerText = t.next;
      }

      function setClass(cls) {
          state.class = cls;
          document.getElementById('view-class').classList.add('hidden');
          document.getElementById('view-subject').classList.remove('hidden');
          renderSubjects(cls);
      }

      function setSubject(sub) {
          state.subject = sub;
          document.getElementById('view-subject').classList.add('hidden');
          document.getElementById('view-battle').classList.remove('hidden');
          document.getElementById('main-header').classList.remove('hidden');
          document.getElementById('game-nav').classList.remove('hidden');

          const t = translations[state.lang] || translations['en'];
          document.getElementById('header-context').innerText = `${t.subjects[sub]}`;
          document.getElementById('nav-class-info').innerText = state.lang === 'hi' ? `‡§ï‡§ï‡•ç‡§∑‡§æ ${state.class}` : `Class ${state.class}`;
          document.getElementById('nav-subject-info').innerText = t.subjects[sub];

          startGame();
      }

      function goBack(toView) {
          clearInterval(state.timer);
          document.querySelectorAll('main').forEach(el => el.classList.add('hidden'));
          document.getElementById(`view-${toView}`).classList.remove('hidden');
          if(toView === 'welcome') {
              document.getElementById('main-header').classList.add('hidden');
              document.getElementById('game-nav').classList.add('hidden');
          }
      }

      function endGame() {
          clearInterval(state.timer);
          location.reload();
      }

      // --- CONTENT GENERATION ---
      function renderSubjects(cls) {
          const container = document.getElementById('subject-grid');
          container.innerHTML = '';

          let subs = [];
          if(cls <= 5) subs = ['Math', 'English', 'EVS', 'GK'];
          else if(cls <= 10) subs = ['Math', 'Science', 'English', 'History', 'GK'];
          else subs = ['Physics', 'Chemistry', 'Biology', 'Math', 'English'];

          const t = translations[state.lang] || translations['en'];

          subs.forEach(sub => {
              const btn = document.createElement('button');
              btn.className = "glass glass-btn p-4 rounded-xl flex items-center justify-between group transition-all text-left";
              btn.onclick = () => setSubject(sub);

              let icon = "book";
              if(sub === 'Math') icon = "calculator";
              if(sub === 'Science' || sub === 'Physics' || sub === 'Chemistry') icon = "atom";
              if(sub === 'Biology') icon = "dna";
              if(sub === 'GK' || sub === 'History') icon = "globe";

              btn.innerHTML = `
                  <div class="flex items-center gap-3">
                      <div class="w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center text-indigo-400">
                          <iconify-icon icon="lucide:${icon}" width="20"></iconify-icon>
                      </div>
                      <div>
                          <div class="text-sm font-medium text-white">${t.subjects[sub]}</div>
                          <div class="text-[10px] text-zinc-500">Infinite Questions</div>
                      </div>
                  </div>
                  <iconify-icon icon="lucide:arrow-right" class="text-zinc-600 group-hover:text-white transition-colors" width="16"></iconify-icon>
              `;
              container.appendChild(btn);
          });
      }

      // --- GAMEPLAY & TIMER LOGIC ---
      function startTimer() {
          state.timeLeft = 60; // 60 seconds per question
          updateTimerUI();

          if (state.timer) clearInterval(state.timer);

          state.timer = setInterval(() => {
              state.timeLeft--;
              updateTimerUI();

              if (state.timeLeft <= 0) {
                  clearInterval(state.timer);
                  handleTimeOut();
              }
          }, 1000);
      }

      function updateTimerUI() {
          const display = document.getElementById('timer-display');
          const badge = document.getElementById('timer-badge');

          display.innerText = `${state.timeLeft}s`;

          if(state.timeLeft <= 10) {
              display.classList.add('timer-warning');
              badge.classList.add('border-rose-500/50', 'bg-rose-500/10');
          } else {
              display.classList.remove('timer-warning');
              badge.classList.remove('border-rose-500/50', 'bg-rose-500/10');
          }
      }

      function handleTimeOut() {
          if (state.isAnswered) return;
          state.isAnswered = true;

          // Break streak
          state.streak = 0;
          document.getElementById('streak-display').innerText = state.streak;

          // Show timeout badge
          document.getElementById('timeout-badge').classList.remove('hidden');
          const t = translations[state.lang] || translations['en'];
          document.getElementById('timeout-badge').innerText = t.timeUp;

          // Highlight correct answer
          const correctBtn = document.getElementById(`opt-${state.correctIdx}`);
          if(correctBtn) {
              correctBtn.classList.add('correct-anim');
              correctBtn.querySelector(`#status-${state.correctIdx}`).setAttribute('icon', 'lucide:check-circle-2');
              correctBtn.querySelector(`#status-${state.correctIdx}`).classList.replace('text-transparent', 'text-emerald-500');
          }

          document.getElementById('next-btn').classList.remove('hidden');
      }

      function generateQuestion() {
          const cls = state.class;
          const sub = state.subject;
          const lang = state.lang;
          if(sub === 'Math') return generateMathQuestion(cls, lang);
          return getStaticQuestion(cls, sub, lang);
      }

      function generateMathQuestion(cls, lang) {
          const mathPrompts = {
              en: "Solve: ", hi: "‡§π‡§≤ ‡§ï‡§∞‡•á‡§Ç: ", hinglish: "Solve karo: ",
              mr: "‡§∏‡•ã‡§°‡§µ‡§æ: ", bn: "‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®: ", ta: "‡Æ§‡ØÄ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç: ",
              te: "‡∞™‡∞∞‡∞ø‡∞∑‡±ç‡∞ï‡∞∞‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø: ", gu: "‡™â‡™ï‡´á‡™≤‡´ã: ", kn: "‡≤™‡≤∞‡≤ø‡≤π‡≤∞‡≤ø‡≤∏‡≤ø: ",
              ml: "‡¥™‡¥∞‡¥ø‡¥π‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï: ", pa: "‡®π‡©±‡®≤ ‡®ï‡®∞‡©ã: ", or: "‡¨∏‡¨Æ‡¨æ‡¨ß‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å: ",
              as: "‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶® ‡¶ï‡ß∞‡¶ï: ", ur: "ÿ≠ŸÑ ⁄©ÿ±€å⁄∫: "
          };
          const prompt = mathPrompts[lang] || mathPrompts['en'];

          const operations = cls <= 2 ? ['+'] : cls <= 5 ? ['+', '-', '*'] : ['+', '-', '*', '/'];
          const op = operations[Math.floor(Math.random() * operations.length)];
          let a, b, ans, qText;
          const range = cls * 10;

          if(op === '+') { a = Math.floor(Math.random() * range) + 1; b = Math.floor(Math.random() * range) + 1; ans = a + b; qText = `${a} + ${b} = ?`; }
          else if(op === '-') { a = Math.floor(Math.random() * range) + range; b = Math.floor(Math.random() * range) + 1; ans = a - b; qText = `${a} - ${b} = ?`; }
          else if(op === '*') { a = Math.floor(Math.random() * (cls + 2)) + 1; b = Math.floor(Math.random() * 10) + 1; ans = a * b; qText = `${a} √ó ${b} = ?`; }
          else { b = Math.floor(Math.random() * 10) + 1; ans = Math.floor(Math.random() * 10) + 1; a = b * ans; qText = `${a} √∑ ${b} = ?`; }

          // Higher class challenge
          if(cls > 7 && Math.random() > 0.8) {
               const val = Math.floor(Math.random() * 20) + 1;
               qText = `${val}¬≤ = ?`;
               ans = val * val;
          }

          let options = new Set([ans]);
          while(options.size < 4) {
              let offset = Math.floor(Math.random() * 10) - 5;
              if(offset === 0) offset = 1;
              let v = ans + offset;
              options.add(v);
          }
          return { q: `${prompt}${qText}`, options: Array.from(options).sort(() => Math.random() - 0.5), ans: ans };
      }

      function getStaticQuestion(cls, sub, lang) {
          const db = [
              { match: { sub: ['Science', 'EVS', 'Biology'] }, en: { q: "Which gas do humans breathe in?", opts: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Helium"], a: "Oxygen" }, hi: { q: "‡§Æ‡§æ‡§®‡§µ ‡§ï‡•å‡§® ‡§∏‡•Ä ‡§ó‡•à‡§∏ ‡§∏‡§æ‡§Ç‡§∏ ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç?", opts: ["‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§®", "‡§ï‡§æ‡§∞‡•ç‡§¨‡§® ‡§°‡§æ‡§á‡§ë‡§ï‡•ç‡§∏‡§æ‡§á‡§°", "‡§®‡§æ‡§á‡§ü‡•ç‡§∞‡•ã‡§ú‡§®", "‡§π‡•Ä‡§≤‡§ø‡§Ø‡§Æ"], a: "‡§ë‡§ï‡•ç‡§∏‡•Ä‡§ú‡§®" }, hinglish: { q: "Humans kaunsi gas breathe karte hain?", opts: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Helium"], a: "Oxygen" } },
              { match: { sub: ['Science', 'Physics'] }, en: { q: "What is the unit of Force?", opts: ["Newton", "Joule", "Watt", "Pascal"], a: "Newton" }, hi: { q: "‡§¨‡§≤ (Force) ‡§ï‡•Ä ‡§á‡§ï‡§æ‡§à ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", opts: ["‡§®‡•ç‡§Ø‡•Ç‡§ü‡§®", "‡§ú‡•Ç‡§≤", "‡§µ‡§æ‡§ü", "‡§™‡§æ‡§∏‡•ç‡§ï‡§≤"], a: "‡§®‡•ç‡§Ø‡•Ç‡§ü‡§®" }, hinglish: { q: "Force ki unit kya hoti hai?", opts: ["Newton", "Joule", "Watt", "Pascal"], a: "Newton" } },
              { match: { sub: ['Chemistry'] }, en: { q: "What is H2O?", opts: ["Water", "Salt", "Air", "Acid"], a: "Water" }, hi: { q: "H2O ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?", opts: ["‡§™‡§æ‡§®‡•Ä", "‡§®‡§Æ‡§ï", "‡§π‡§µ‡§æ", "‡§Ö‡§Æ‡•ç‡§≤"], a: "‡§™‡§æ‡§®‡•Ä" }, hinglish: { q: "H2O kya hota hai?", opts: ["Paani", "Namak", "Hawa", "Acid"], a: "Paani" } },
              { match: { sub: ['English'] }, en: { q: "Antonym of 'Happy' is:", opts: ["Sad", "Joy", "Glad", "Fun"], a: "Sad" }, hi: { q: "'Happy' (‡§ñ‡•Å‡§∂) ‡§ï‡§æ ‡§µ‡§ø‡§≤‡•ã‡§Æ ‡§π‡•à:", opts: ["Sad (‡§¶‡•Å‡§ñ‡•Ä)", "Joy", "Glad", "Fun"], a: "Sad (‡§¶‡•Å‡§ñ‡•Ä)" }, hinglish: { q: "'Happy' ka opposite kya hai?", opts: ["Sad", "Joy", "Glad", "Fun"], a: "Sad" } },
              { match: { sub: ['GK', 'History'] }, en: { q: "Capital of India is:", opts: ["New Delhi", "Mumbai", "Kolkata", "Chennai"], a: "New Delhi" }, hi: { q: "‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§π‡•à:", opts: ["‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä", "‡§Æ‡•Å‡§Ç‡§¨‡§à", "‡§ï‡•ã‡§≤‡§ï‡§æ‡§§‡§æ", "‡§ö‡•á‡§®‡•ç‡§®‡§à"], a: "‡§®‡§à ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä" }, hinglish: { q: "India ki capital kaunsi hai?", opts: ["New Delhi", "Mumbai", "Kolkata", "Chennai"], a: "New Delhi" } }
          ];
          const relevant = db.filter(item => item.match.sub.includes(sub) || (sub === 'GK'));
          const data = relevant.length > 0 ? relevant[Math.floor(Math.random() * relevant.length)] : db[0];
          const content = data[lang] || data['en'];
          return { q: content.q, options: content.opts, ans: content.a };
      }

      function startGame() {
          state.score = 0;
          state.streak = 0;
          state.currentQIndex = 0;
          renderGameUI();
      }

      function renderGameUI() {
          const qData = generateQuestion();
          state.isAnswered = false;

          // Start Timer
          startTimer();

          document.getElementById('timeout-badge').classList.add('hidden');
          document.getElementById('next-btn').classList.add('hidden');
          document.getElementById('question-text').innerText = qData.q;
          document.getElementById('score-display').innerText = state.score;
          document.getElementById('streak-display').innerText = state.streak;

          const progress = (state.currentQIndex % 10) * 10;
          document.getElementById('progress-bar').style.width = `${progress}%`;

          const container = document.getElementById('options-container');
          container.innerHTML = '';
          const letters = ['A', 'B', 'C', 'D'];

          let displayOptions = [...qData.options];
          if(state.subject !== 'Math') displayOptions.sort(() => Math.random() - 0.5);

          let correctIndex = displayOptions.indexOf(qData.ans);
          state.correctIdx = correctIndex;

          displayOptions.forEach((opt, idx) => {
              const btn = document.createElement('button');
              btn.className = `group w-full text-left relative overflow-hidden rounded-xl border border-zinc-800 bg-zinc-900/50 p-4 transition-all duration-200 active:scale-[0.98] hover:border-zinc-600`;
              btn.onclick = () => checkAnswer(idx, btn);
              btn.id = `opt-${idx}`;

              btn.innerHTML = `
                  <div class="flex items-center justify-between relative z-10">
                      <div class="flex items-center gap-4">
                          <div class="w-8 h-8 rounded-lg bg-zinc-800 flex items-center justify-center text-zinc-400 font-medium text-sm group-hover:bg-zinc-700 transition-colors" id="icon-${idx}">${letters[idx]}</div>
                          <span class="text-sm text-zinc-300 font-medium group-hover:text-white">${opt}</span>
                      </div>
                      <iconify-icon id="status-${idx}" icon="" class="text-transparent transition-all" width="18"></iconify-icon>
                  </div>
              `;
              container.appendChild(btn);
          });
      }

      function checkAnswer(selectedIndex, btnElement) {
          if (state.isAnswered) return;
          state.isAnswered = true;
          clearInterval(state.timer); // Stop timer

          const isCorrect = selectedIndex === state.correctIdx;
          const correctBtn = document.getElementById(`opt-${state.correctIdx}`);

          if (isCorrect) {
              state.score += 10;
              state.streak++;
              btnElement.classList.add('correct-anim', 'border-emerald-500/50');
              btnElement.querySelector(`#icon-${selectedIndex}`).classList.replace('bg-zinc-800', 'bg-emerald-500');
              btnElement.querySelector(`#icon-${selectedIndex}`).classList.replace('text-zinc-400', 'text-white');
              const icon = btnElement.querySelector(`#status-${selectedIndex}`);
              icon.setAttribute('icon', 'lucide:check-circle-2');
              icon.classList.replace('text-transparent', 'text-emerald-500');
          } else {
              state.streak = 0;
              btnElement.classList.add('wrong-anim', 'border-rose-500/50');
              btnElement.querySelector(`#icon-${selectedIndex}`).classList.replace('bg-zinc-800', 'bg-rose-500');
              btnElement.querySelector(`#icon-${selectedIndex}`).classList.replace('text-zinc-400', 'text-white');
              const icon = btnElement.querySelector(`#status-${selectedIndex}`);
              icon.setAttribute('icon', 'lucide:x-circle');
              icon.classList.replace('text-transparent', 'text-rose-500');

              if(correctBtn) {
                  correctBtn.classList.add('correct-anim');
                  correctBtn.querySelector(`#status-${state.correctIdx}`).setAttribute('icon', 'lucide:check-circle-2');
                  correctBtn.querySelector(`#status-${state.correctIdx}`).classList.replace('text-transparent', 'text-emerald-500');
              }
          }

          document.getElementById('score-display').innerText = state.score;
          document.getElementById('streak-display').innerText = state.streak;
          document.getElementById('next-btn').classList.remove('hidden');
      }

      function nextQuestion() {
          state.currentQIndex++;
          renderGameUI();
      }
    </script>

    <script>
      (function(){ const extra = ['mr','bn','ta','te','gu','kn','ml','pa','or','as','ur']; extra.forEach(code => { if(!translations[code]) { translations[code] = JSON.parse(JSON.stringify(translations.en)); } }); })();
    </script>
  
</body></html>